<div class="post-container">
    <div class="post-heading">

      <div class = "author-details">
        <app-avatar [img]="getProfilePictureUrl()"></app-avatar>
        <div>
          <h4 class="author-name">{{ post.author.name }}</h4>
          <p class="time">{{ post.createdAt | date:'short' }}</p>
        </div>
      </div>

      <div class="dropdown">
        <button (click)="toggleDropdown()">
        <fa-icon [icon]="faEllipsis"></fa-icon>
        </button>
        <div class="dropdown-menu" [ngClass]="{'show': isDropdownOpen}">
          <button (click) = "handleEdit()">Edit</button>
          <button (click) = "handleDelete()">Delete</button>
        </div>
      </div>
      
    </div>
  
    <div class="post-body">
      <p *ngIf="!isEditing">{{ post.body }}</p>
      <textarea id="content" [(ngModel)]="post.body" name="content" *ngIf="isEditing"></textarea>
      <button class = "save-button" *ngIf = "isEditing" (click) = "savePost()">Save</button>
      <button class = "cancel-button" *ngIf = "isEditing" (click) = "cancelEditing()">Cancel</button>
    </div>

    

    <div class="comments-container">
      <div class="input-container">
        <app-avatar [size]="'40px'" img={{author.profilePictureUrl}}></app-avatar>
        <input type="text" name="comment" id="comment" [(ngModel)]="comment" placeholder="Write your comment" (keydown.enter)="addComment()">
        <button (click)="addComment()">Submit</button>
      </div>
    
      <div *ngFor="let comment of post.comments" class="comment">
        <div *ngIf="editingCommentId === comment.id; else viewMode">
          <div class = "author-comment-details">
            <app-avatar [size]="'30px'" img={{comment.author.profilePictureUrl}}></app-avatar>
            <input [(ngModel)]="comment.body" (keydown.enter)="saveCommentEdit(comment)"/>
          </div>
          <div class = "comment-actions">
            <button (click)="saveCommentEdit(comment)">Save</button>
            <button (click)="cancelCommentEdit(comment)">Cancel</button>
          </div>
        </div>
    
        <ng-template #viewMode>
          <div class="comment-body">
            <div class = "author-comment-details">
              <app-avatar [size]="'30px'" img={{comment.author.profilePictureUrl}}></app-avatar>
              <div>
                <h4><strong>{{ comment.author.name }}</strong></h4>
                <!-- <p><strong>{{ comment.author.name }}</strong>: {{ comment.body }}</p> -->
              </div>     
            </div>
            <p>{{ comment.body }}</p>
          </div>

          <div class = "comment-actions">
            <button (click)="startEditComment(comment)">Edit</button>
            <button (click)="confirmDeleteComment(comment)">Delete</button>
          </div>
        </ng-template>
    
        <div *ngIf="deletingCommentId === comment.id">
          <p>Are you sure you want to delete this comment?</p>
          <div class = "comment-actions">
            <button (click)="deleteComment(comment)">Yes</button>
            <button (click)="cancelDeleteComment()">No</button>
          </div>
        </div>
      </div>
    </div>
        
    

    
  </div> 
